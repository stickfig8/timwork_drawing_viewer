# 건설 도면 탐색 인터페이스 구축

**하나의 건설 현장에는 수백, 수천의 공간 정보가 존재하고, 각 공간은 공종별로 분리된 도면을 갖습니다.**

**여기에 설계 변경이 반영될 때마다 리비전이 쌓여갑니다.**

**이 도면들은 서로 다른 이해관계자에 의해 각기 다른 시점에 갱신되며, 현장을 총괄하기 위해 사용자는 이 모든 흐름을 파악해야 합니다.**

**본 과제는 이 복잡한 데이터 위에서 사용자가 원하는 정보에 빠르게 도달할 수 있는 탐색 경험을 설계하는 것입니다.**

# 용어 설명

- 공종 - 건설 작업의 전문 분야 구분. 건축·구조·설비·소방 등 각 분야의 전문가가 담당하며, 같은 건물이라도 공종별로 별도의 도면이 존재합니다.
- 평면도 — 건물을 위에서 내려다본 수평 단면 도면. 각 층의 구조와 배치를 보여줍니다.
- 배치도 — 단지 전체를 위에서 본 도면. 각 동의 위치, 도로, 조경 등 전체 배치를 보여줌. (문서에서 "전체" 도면이 이 역할)
- 리비전 - 도면의 개정 버전. 건설 과정에서 설계는 구조 검토, 법규 변경, 현장 여건 등의 이유로 수정되곤 합니다. 이때 변경 사항을 반영하여 새로 발행된 도면을 리비전이라 하며, REV1 → REV2
  과 같이 개정 번호가 올라갑니다.

# 과제의 최종 목표

제공된 도면 데이터와 메타데이터를 활용하여, 사용자가 원하는 도면을 탐색할 수 있는 프로토타입 UI를 설계하고 구현합니다.

# 사용자 시나리오

```
현장 소장 김철수 씨의 하루:

김철수 씨는 이 현장의 모든 공종을 총괄하는 현장 소장이다.
김철수가 관리하는 현장에서는 건축, 구조, 설비, 소방 등 각 공종별 전문가가 각자의 도면을 기준으로 작업하고,
설계 변경이 생기면 리비전 도면을 발행한다.
김철수 씨는 이 모든 흐름을 파악하여 협업이 원활히 이루어 질 수 있도록 해야한다.

[아침 회의 전 — 최신 현황 파악]
건축팀에서 101동 도면 리비전을 올렸다는 연락을 받았다.
회의 전에 최신 도면을 확인하고, 이전 버전과 무엇이 달라졌는지 빠르게 파악해야 한다.

[현장 상황 체크 — 공종 간 간섭 확인]
101동 설비 배관 시공을 진행 예정이다.
기존 배관(설비)의 위치가 건축팀이 변경한 벽체(건축)와 충돌하지 않는지,
설비 도면과 건축 도면을 겹쳐서 확인해야 한다.

[오후 협력업체 미팅 — 변경 이력 추적]
건축팀과 주민공동시설 도면 변경 건으로 미팅이 잡혔다.
REV1에서 REV3까지 변경점을 추적하여 변경 방향을 논의해야 한다.

도면 데이터에는 공간, 공종, 리비전 등 다양한 분류 축이 존재합니다.
그러나 현실에서 김철수 씨가 도면을 찾는 방식은 폴더를 하나씩 열어가며 파일명을 눈으로 훑는 것입니다.
어떤 리비전이 최신인지, 어떤 공종끼리 겹쳐봐야 하는지, 기억에 의존하거나 담당자에게 확인해야 합니다.
김철수 씨에게 필요한 것은 이 복잡한 분류 체계를 헤매이지 않고, 자연스러운 탐색 흐름 안에서 원하는 도면에 도달할 수 있는 인터페이스입니다.
```

<br>

# 도면 데이터

### 디렉토리 구조

```shell
과제파일/
├── README.md
└── data/
    ├── metadata.json                  # 전체 메타데이터
    └── drawings/                      # 도면 이미지
        ├── 00_전체.png
        ├── 01_101동 지상1층 평면도_건축.png
        ├── 02_101동 지상1층 평면도_건축_REV1.jpeg
        ├── 03_101동 지상1층 평면도_공조설비.jpeg
        ├── 04_101동 지상1층 평면도_구조.png
        ├── 05_101동 지상1층 평면도_구조_REV1A.png
        ├── 05_101동 지상1층 평면도_구조_REV2A.jpeg
        ├── 06_101동 지상1층 평면도_구조_REV1B.png
        ├── 06_101동 지상1층 평면도_구조_REV2B.jpeg
        ├── 09_주민공동시설_지상1층 평면도_건축.png
        ├── 09_주민공동시설_지상1층 평면도_건축_REV1.jpeg
        ├── 09_주민공동시설_지상1층 평면도_건축_REV2.jpeg
        ├── 09_주민공동시설_지상1층 평면도_건축_REV3.jpeg
        └── ...
```

<br>

### 데이터 구조 안내

`metadata.json`은 아래와 같은 계층 구조를 가집니다.

```
전체 배치도
├── 101동
│   ├── 건축    ─── REV1
│   ├── 공조설비 ─── REV1
│   ├── 구조
│   │   ├── Region A ─── REV1A, REV2A
│   │   └── Region B ─── REV1B, REV2B
│   ├── 배관설비 ─── REV1
│   └── 소방 ─── REV1
├── 주민공동시설
│   ├── 건축 ─── REV1, REV2, REV3
│   ├── 구조 ─── REV1
│   ├── 설비 ─── REV1
│   └── 소방 ─── REV1
└── 주차장
    ├── 구조 ─── REV1
    ├── 소방 ─── REV1
    ├── 설비 ─── REV1
    └── 조경 ─── REV1
```

<br>

#### `metadata.json` 주요 필드 설명

| 필드          | 설명                                  |
| ------------- | ------------------------------------- |
| `project`     | 프로젝트 기본 정보 (이름, 좌표 단위)  |
| `disciplines` | 사용되는 공종(건축·구조·설비 등) 목록 |
| `drawings`    | 도면 데이터. 키가 도면 번호           |

<br>

#### Drawing (도면) 필드

| 필드          | 설명                                     |
| ------------- | ---------------------------------------- |
| `id`          | 도면 식별자                              |
| `name`        | 도면 이름                                |
| `image`       | 도면 이미지 파일명 (`drawings/` 폴더 내) |
| `parent`      | 상위 도면 번호                           |
| `position`    | 상위 도면 위에서 도면이 차지하는 영역    |
| `disciplines` | 도면에 속한 공종별 데이터                |

<br>

#### Position (위치) 필드

상위 도면(예: 전체 배치도) 위에서 이 건물이 어디에 위치하는지를 나타냅니다.

| 필드             | 설명                                                                                |
| ---------------- | ----------------------------------------------------------------------------------- |
| `vertices`       | 다각형 꼭짓점 좌표 배열 `[[x, y], ...]`. 상위 도면 이미지의 픽셀 좌표               |
| `imageTransform` | 이 건물 이미지를 상위 도면 위에 정렬하기 위한 변환. 기준은 `parent`가 가리키는 도면 |

<br>

#### 두 가지 Transform

데이터에는 **용도가 다른 두 종류의 좌표 변환**이 존재합니다.

##### imageTransform — 이미지 정렬 변환

한 이미지(imageB)를 기준 이미지(imageA) 위에 올바르게 겹쳐 놓기 위한 변환 파라미터입니다.

| 필드         | 설명                                                                                                 |
| ------------ | ---------------------------------------------------------------------------------------------------- |
| `relativeTo` | 기준이 되는 이미지 파일명. 이 이미지 위에 오버레이함. position 레벨에서는 `parent`가 대신하므로 없음 |
| `x`          | 기준 이미지의 앵커 포인트 X 좌표 (px)                                                                |
| `y`          | 기준 이미지의 앵커 포인트 Y 좌표 (px)                                                                |
| `scale`      | 오버레이 이미지의 확대/축소 비율 (1.0 = 동일 크기)                                                   |
| `rotation`   | 회전 각도 (라디안, 0 = 회전 없음)                                                                    |

##### polygonTransform — 폴리곤 렌더링 변환

폴리곤(vertices) 좌표를 이미지 위에 정확히 그리기 위한 변환 파라미터입니다. `polygon` 객체 내부에 위치합니다.

| 필드       | 설명                                  |
| ---------- | ------------------------------------- |
| `x`        | 폴리곤 렌더링 앵커 포인트 X 좌표 (px) |
| `y`        | 폴리곤 렌더링 앵커 포인트 Y 좌표 (px) |
| `scale`    | 폴리곤 스케일                         |
| `rotation` | 폴리곤 회전 각도 (라디안)             |

##### 두 Transform의 관계

- `imageTransform`은 두 도면 이미지를 **정렬(align)** 하는 값으로, 도면 조합마다 다를 수 있음
- `polygonTransform`은 폴리곤 꼭짓점을 **화면에 렌더링**할 때 적용하는 좌표계 변환

<br>

#### relativeTo 매핑 — 기준 도면 관계

각 `imageTransform`의 `relativeTo`가 가리키는 기준 이미지입니다.

| 도면         | 공종                                 | relativeTo (기준 이미지)                  |
| ------------ | ------------------------------------ | ----------------------------------------- |
| 101동        | 건축, 공조설비, 구조, 배관설비, 소방 | `01_101동 지상1층 평면도_건축.png`        |
| 101동        | 구조 region A/B (revision)           | `04_101동 지상1층 평면도_구조.png`        |
| 주민공동시설 | 건축 (revision), 구조, 설비, 소방    | `09_주민공동시설_지상1층 평면도_건축.png` |
| 주차장       | 구조, 소방, 설비, 조경               | `13_주차장 지상1층 확대 평면도_구조.png`  |

<br>

#### Discipline (공종) 필드

| 필드                       | 필수 | 설명                                                                              |
| -------------------------- | ---- | --------------------------------------------------------------------------------- |
| `imageTransform`           | -    | 이 공종 이미지를 기준 도면 위에 정렬하기 위한 변환. `relativeTo`로 기준 도면 명시 |
| `image`                    | -    | 공종 자체 도면 이미지 (구조처럼 region이 있는 경우 등)                            |
| `polygon`                  | -    | 건물 도면 내에서 이 공종이 다루는 관심 영역                                       |
| `polygon.vertices`         | -    | 영역 다각형 꼭짓점 좌표 `[[x, y], ...]`                                           |
| `polygon.polygonTransform` | -    | 폴리곤을 이미지 위에 렌더링하기 위한 변환                                         |
| `regions`                  | -    | 하위 영역 분할 (구조 공종에서 A, B 구역 등)                                       |
| `revisions`                | O    | 리비전(개정) 이력 배열                                                            |

<br>

#### Region (영역) 필드

하나의 도면을 여러 영역(A, B 등)으로 나누어 독립적인 리비전을 관리하는 경우 사용합니다.

| 필드        | 설명                                                              |
| ----------- | ----------------------------------------------------------------- |
| `polygon`   | 해당 영역의 폴리곤 (`vertices` + `polygonTransform`)              |
| `revisions` | 해당 영역의 리비전 배열. 각 revision에 자체 `imageTransform` 포함 |

<br>

#### Revision (리비전) 필드

| 필드             | 필수 | 설명                                                                                   |
| ---------------- | ---- | -------------------------------------------------------------------------------------- |
| `version`        | O    | 리비전 버전명 (REV1, REV2A 등)                                                         |
| `image`          | O    | 해당 리비전의 도면 이미지 파일명                                                       |
| `date`           | O    | 발행일                                                                                 |
| `description`    | O    | 리비전 설명                                                                            |
| `changes`        | O    | 변경 내역 배열 (빈 배열이면 초기 설계)                                                 |
| `imageTransform` | -    | 이 리비전 이미지의 정렬 변환. `relativeTo`로 기준 도면 명시 (region revision에서 사용) |
| `polygon`        | -    | 리비전별로 관심 영역이 다른 경우의 폴리곤 데이터 (`vertices` + `polygonTransform`)     |

<br>

#### 특수 케이스

| 케이스                    | 해당 도면         | 설명                                                                                                                                     |
| ------------------------- | ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| region이 있는 구조 공종   | 101동             | discipline에 전체 polygon, regions(A/B)에 영역별 polygon + revisions. region revision의 `imageTransform.relativeTo`는 **구조 도면** 기준 |
| revision별 polygon이 다름 | 주민공동시설 건축 | discipline에 `imageTransform`/`polygon` 없음. 각 revision마다 독립적인 `imageTransform` + `polygon` 보유                                 |
| polygon이 없는 공종       | 주차장 구조       | 기준 도면 자체이므로 관심 영역 지정 불필요. `imageTransform`만 존재                                                                      |

<br>

# 요구사항

### 필수 기능

결과물은 다음을 **반드시** 할 수 있어야 합니다.

| 기능          | 설명                                                  |
| ------------- | ----------------------------------------------------- |
| 도면 탐색     | 사용자가 원하는 도면을 찾을 수 있어야 함              |
| 도면 표시     | 선택한 도면 이미지를 화면에 표시                      |
| 컨텍스트 인식 | 현재 어떤 도면을 보고 있는지 사용자가 알 수 있어야 함 |

<br>

### 자유롭게 결정할 것

**사용자 시나리오에 제시된 문제를 해결할 수 있는 UX/UI**

`metadata.json`의 데이터 구조를 파악하고, 지원자가 가장 좋다고 생각하는 방식으로 설계해주세요.

<br>

# 제출물

### A. 소스 코드

- GitHub 저장소 링크
- `npm install && npm run dev`로 실행 가능해야 함
- 필수: React 18+ 또는 Vue 3+, TypeScript

### B. README.md

```markdown
# 프로젝트명

## 실행 방법

npm install
npm run dev

## 기술 스택

- (사용한 기술 나열)

## 구현 기능

- [ ] 완성한 기능

## 미완성 기능

- [ ] 미완성 기능
```

### C. DESIGN.md

단순히 결과물을 나열하는 것이 아닌, **어떤 고민을 통해 UI를 설계했는지 그 과정**을 보여주는 것이 중요합니다. 아래 질문들에 대해 자유롭게 서술해주세요.

- **데이터 분석**: metadata.json을 어떻게 해석했나요? 데이터 구조를 어떻게 이해했나요? 더 나은 데이터 표현 방법이 있을까요?
- **접근 방식**: 전체 과제를 어떤 순서와 방식으로 해결하셨나요?
- **UI 설계 결정**:
  - 어떤 레이아웃을 선택했고, 왜 그 방식이 최선이라고 판단했나요?
  - 고려했던 대안들과 각각의 장단점은 무엇이었나요?
- **기술 선택**: 상태 관리, 스타일링 등을 어떤 기준으로 선택했나요?
- **어려웠던 점 및 개선 방안**: 과제를 수행하며 겪었던 어려움은 무엇이었고, 시간이 더 주어진다면 어떤 부분을 개선하고 싶으신가요?

**다 구현하지 못해도 제출 가능합니다. 방법론과 문제해결 과정을 더 중요하게 봅니다.**

- 미완성이어도 좋습니다. 대신 아래를 명확히 남겨주세요.
  - 미해결 문제 정의
  - 시도한 방법론
  - 시도 가능한 대안
- 부분 점수 부여
  - 설계의 일관성, 근거 있는 선택, 사용자 관점의 고려를 높게 평가합니다.

<br>

# 기간 및 유의사항

- 제출 기한 : 과제 수령일로부터 7일
- 유의 사항 : 과제 내용 외부 공유 금지

<br>

# Q&A

eunchan@timwork.kr 문의주시면 확인하는 즉시 답변 드리겠습니다.

<br>

---

마지막으로, 이 과제는 정답이 정해져 있지 않습니다.

자신만의 논리와 기준으로 문제를 정의하고 해결해나가는 과정을 보여주시길 기대합니다.
